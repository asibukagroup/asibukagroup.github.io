---
layout: default
title: Search
permalink: /search/
---

<h1>Search</h1>
<input type="text" id="search-box" placeholder="Type to search..." />
<ul id="search-results"></ul>

<script src="https://unpkg.com/lunr/lunr.js"></script>
<script>
  let idx = null;
  let docs = [];

  fetch("{{ '/search.json' | relative_url }}")
    .then(response => response.json())
    .then(json => {
      docs = json;
      idx = lunr(function () {
        this.ref('url');
        this.field('title');
        this.field('content');
        this.field('tags');
        this.field('categories');

        json.forEach(doc => this.add(doc));
      });
    });

  document.getElementById("search-box").addEventListener("input", function () {
    const query = this.value.trim();
    const resultsContainer = document.getElementById("search-results");
    resultsContainer.innerHTML = "";

    if (query.length > 1 && idx) {
      const results = idx.search(query);
      results.forEach(result => {
        const matched = docs.find(d => d.url === result.ref);
        const li = document.createElement("li");
        li.innerHTML = `<a href="${matched.url}">${matched.title}</a>`;
        resultsContainer.appendChild(li);
      });
    }
  });
</script>